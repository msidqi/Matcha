version : '3'

services:
    webserver:
        build:
            context: .
            dockerfile: Dockerfile
        container_name: 'server'
        ports:
            - 80:80
            - 443:443
            - 3000:3000
        working_dir: /app
        command: nodemon nodeapp/app.js
        volumes :
            - .:/app
        restart : on-failure
        links:
            - "database:database"
        tty: true
        restart : always
    database:
        container_name: 'db'
        image: "neo4j"
        volumes:
            - ./neo4j/data:/data
        ports:
            - 7687:7687
            - 7474:7474
        environment:
            - NEO4J_AUTH=none
        restart : always

